var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.array=$jscomp.array||{};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es6","es3");
$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).i}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
spa.blog=function(){var a={anchor:null,previous:null},b=null,c=null,d,e=spa.model.blog,f=new showdown.Converter({extensions:["mathExt"]}),m=function(b){b.stopPropagation();(b=a.previous)&&("blog"===b[0]?spa.uriAnchor.setAnchor({page:["newist",c],cache:!1},!1):spa.uriAnchor.setAnchor({page:b,cache:!0},!1))},g=function(a){a=a.detail;c=a.channel;a.content=f.makeHtml(a.content);b.innerHTML=spa.blog.template(a);spa.mathjax.update();d=document.getElementById("blog-back");d.addEventListener("click",m);componentHandler.upgradeDom()};
return{configModule:function(b){spa.util.setConfigMap({input_map:b,config_map:a})},initModule:function(c){c.innerHTML='<article id="blog-container"></article>';b=document.getElementById("blog-container");spa.gevent.subscribe("spa","load-blog",g);e.load(a.anchor.page)}}}();
spa.blog.template=function(a){return'\n    <div class="blog-content mdl-grid">\n      <div class="mdl-card mdl-cell--12-col mdl-shadow--2dp">\n        <header class="blog-header">\n          <span>'+a.tags+"&nbsp;|&nbsp;"+a.date+'</span>\n        </header>\n        <div class="mdl-card__title">\n          <h2>'+a.title+'</h2>\n        </div>\n        <div class="blog-section mdl-card__supporting-text">\n          '+a.content+'\n        </div>\n      </div>\n      <nav class="blog-nav mdl-cell mdl-cell--12-col">\n        <button id="blog-back" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" >\n          <i class="material-icons" role="presentation">arrow_back</i>\n        </button>\n        <span class="mdl-tooltip" for="blog-back">\u524d\u306e\u753b\u9762</span> \n      </nav>\n    </div>'};spa.contact=function(){var a={},b={},c=spa.model.contact,d=function(a){a.preventDefault();var f=new FormData(b.form);a=_.object(_.map(["name","email","note"],function(a){return[a,f.get(a)]}));_.isEmpty(_.without(_.values(a),""))?b.message.innerText="\u30d5\u30a9\u30fc\u30e0\u304c\u672a\u8a18\u5165\u3067\u3059\u3002":c.mail(b.form.action,a)},e=function(a){b.message.innerText=a.detail};return{configModule:function(b){spa.util.setConfigMap({input_map:b,config_map:a});return!0},initModule:function(a){a.innerHTML=
spa.contact.template;document.getElementById("contact-container");b={form:document.querySelector("form"),message:document.getElementById("contact-message")};spa.gevent.subscribe("spa","change-contact",e);b.form.addEventListener("submit",d,!1);componentHandler.upgradeDom()}}}();spa.contact.template=function(){return'\n    <article id="contact-container">\n      <div class="contact-content mdl-grid">\n        <div class="mdl-card mdl-cell--12-col mdl-shadow--4dp">\n          <div class="mdl-card__title">\n            <h2 class="mdl-card__title-text">Contact</h2>\n          </div>\n          <div class="mdl-card__media">\n            <img class="article-image" src=" /images/banner.png" border="0" alt="">\n          </div>\n          <div class="mdl-card__supporting-text">\n            <p id="contact-message">\n            \u958b\u767a\u306e\u554f\u3044\u5408\u308f\u305b\u3092\u304a\u53d7\u3051\u3044\u305f\u3057\u307e\u3059\u3002\n            </p>\n            <form action="/contact" class="">\n              <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                <input name="name" class="mdl-textfield__input" pattern="[A-Z,a-z, ]*" type="text" id="Name">\n                <label class="mdl-textfield__label" for="Name">Name...</label>\n                <span class="mdl-textfield__error">Letters and spaces only</span>\n              </div>\n              <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                <input name="email" class="mdl-textfield__input" type="text" id="Email">\n                <label class="mdl-textfield__label" for="Email">Email...</label>\n              </div>\n              <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                <textarea name="note" class="mdl-textfield__input" type="text" rows="5" id="note"></textarea>\n                <label class="mdl-textfield__label" for="note">Enter note</label>\n              </div>\n              <p>\n                <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" type="submit">\n                    Submit\n                </button>\n              </p>\n            </form>\n          </div>\n        </div>\n      </div>\n    </article>'}();spa.home=function(){var a={anchor:null},b={},c=spa.model.entry(),d=function(a){var c=a.detail;a=_.range(c.length);a.unshift(_.findIndex(c,{slug:"aboutme"}));a=_.uniq(a).map(function(a){a=c[a];return'\n        <div class="home-section mdl-card__supporting-text">\n          <section>\n            <h3>'+a.title+"</h3>\n            <p>"+a.content+"</p>\n          </section>\n        </div>"}).join("");b.home.innerHTML=a};return{configModule:function(b){spa.util.setConfigMap({input_map:b,config_map:a});
return!0},initModule:function(a){a.innerHTML=spa.home.template;document.getElementById("home-container");b={home:document.getElementById("home-contents")};spa.gevent.subscribe("spa","change-home",d);componentHandler.upgradeDom();c.newist({fetch:31,tags:"thirdpen",channel:"home",offset:0})}}}();spa.home.template=function(){return'\n    <article id="home-container">\n      <div class="home-content mdl-grid">\n        <div class="mdl-card mdl-cell--12-col mdl-shadow--2dp">\n          <div class="mdl-card__title">\n             <h2>About Third Pen</h2>\n          </div>\n          <div id="home-contents"></div>\n        </div>\n      </div>\n    </article>'}();spa.model=function(){var a=null,b,c=function(){var b=spa.fake.mockAjax;return{get:function(){return a},identify:function(c){c={page:JSON.stringify(c)};b.post("/identify",c).then(function(b){a=b;spa.gevent.publish("spa-identify",a)})["catch"](function(a){spa.gevent.publish("spa-error",a)})}}}(),d=function(){var b=spa.fake.mockAjax;return{load:function(c){c="https://elabo-one.appspot.com/thirdpen/"+c.join("/");b.get(c,{},a.token).then(function(a){spa.gevent.publish("load-blog",a.publish)})["catch"](function(a){console.info(a);
_.has(a,"status")&&"401"===a.status?f():_.has(a,"status")&&"403"===a.status?f():spa.gevent.publish("spa-error",a)})},current:function(a){spa.gevent.publish("load-blog",null)}}}(),e=function(){var a=spa.fake.mockAjax;return{mail:function(b,c){a.post(b,c).then(function(a){spa.gevent.publish("change-contact",a.publish)})["catch"](function(a){spa.gevent.publish("spa-error",a)})}}}(),f=function(){a={appid:"appspot"}};return{initModule:f,apps:c,entry:function(){var c=spa.fake.mockAjax,d={tech:"change-newist",
think:"change-newist",github:"change-newist",euler:"change-newist",home:"change-home"};return{newist:function(e){c.get("https://elabo-one.appspot.com/thirdpen/"+e.channel+"/"+e.tags+"/"+e.offset,{fetch:e.fetch},a.token).then(function(a){b=a.publish;spa.gevent.publish(d[e.channel],a.publish)})["catch"](function(a){_.has(a,"status")&&"401"===a.status?f():_.has(a,"status")&&"403"===a.status?f():spa.gevent.publish("spa-error",a)})},current:function(a){spa.gevent.publish(d[a.channel],b)},list:function(){return b}}},
blog:d,contact:e}}();spa.newist=function(){var a={anchor:null},b=null,c=spa.model.entry(),d=new showdown.Converter({extensions:["mathExt"]}),e=function(f){var e=f.detail,g=$jscomp.makeIterator(_.rest(a.anchor.page));f=g.next().value;var h=g.next().value,g=g.next().value,e=e.map(function(a){var b=a.title,c=a.excerpt,e=a.date,f=a.initdate,g=a.channel,k=a.tags;a="/blog/"+a.key.split("_").join("/");c=d.makeHtml(c);return'\n          <div class="newist-section mdl-card__supporting-text">\n           <section>\n             <h3><a href="'+
a+'">'+b+"</a></h3>\n             "+c+'\n             <footer class="mdl-mini-footer">\n               <span><a href="/newist/'+g+"/"+k+'">'+k+"</a> | "+e+"</span>\n               <span>\u521d\u7a3f"+f+"</span>\n             </footer>\n           </section>\n          </div>"}).join(""),g=g||0,k="show more",n=g+c.list().length;n==g||0<n%6?(k="No More",f="/newist/"+f+"/"+(h||"all")+"/"+g):f="/newist/"+f+"/"+(h||"all")+"/"+n;b.innerHTML=spa.newist.template([f,k,e]);componentHandler.upgradeDom()};return{configModule:function(b){spa.util.setConfigMap({input_map:b,
config_map:a})},initModule:function(d){var f=$jscomp.makeIterator(_.rest(a.anchor.page)),g=f.next().value,h=f.next().value,f=f.next().value,g={fetch:6,tags:h||"all",channel:g,offset:f||0};b=d;spa.gevent.subscribe("spa","change-newist",e);d="newist";a.anchor.cache&&(d="current");c[d](g)}}}();
spa.newist.template=function(a){a=$jscomp.makeIterator(a);var b=a.next().value,c=a.next().value;return'\n    <article id="newist-container">\n      <div class="newist-content mdl-grid">\n        <div class="mdl-card mdl-cell--12-col mdl-shadow--2dp">\n          <div class="mdl-card__title">\n             <h2>\u65b0\u7740\u30a8\u30f3\u30c8\u30ea</h2>\n          </div>\n          <div>'+a.next().value+'</div>\n        </div>\n        <nav class="newist-nav mdl-cell mdl-cell--12-col">\n          <a href="'+
b+'" title="'+c+'">\n            More\n            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">\n              <i class="material-icons" role="presentation">arrow_forward</i>\n            </button>\n          </a>\n        </nav>\n      </div>\n    </article>'};spa.shell=function(){var a=void 0,b=[],c={},d=["newist","home","blog","contact"];spa.showdownext.set();spa.mathjax.init();var e=function(a){spa.uriAnchor.setAnchor({page:a.detail.anchor},!1)},f=function(b){c.error.configModule({error_model:{name:"server",message:b.detail,data:null}});c.error.initModule(a)},m=function(a){console.info(a.detail)},g=function(a){var b=_.find(a.path,function(a){return"A"===a.tagName?a:!1});if(b){var b=b.href.split("/"),c=_.intersection(b,d);0<c.length&&(a.preventDefault(),
a=_.rest(b,_.indexOf(b,c[0])),spa.uriAnchor.setAnchor({page:a},!1))}},h=function(e){try{var f=spa.uriAnchor.makeAnchorMap("home");if("appspot"===spa.model.apps.get().appid)return spa.model.apps.identify(f.page),!1;var g=f.page[0],k=f.page,h=k.join("_"),l=b.indexOf(h);-1<d.indexOf(h)?(b=[h],l=0):-1==l?(-1==b.indexOf(k[0])&&b.push(k[0]),b.push(h),l=b.length-1):1<b.length-l?b=b.slice(0,l+1):console.info("lastIndex is same: %s",h);var m=0==l?null:b[l-1].split("_");c[g].configModule({anchor:f,previous:m});
c[g].initModule(a);return!0}catch(p){return console.info(p),c.error.configModule({error_model:p}),c.error.initModule(a),!1}};return{initModule:function(){c.error=spa.error;_.each(d,function(a){c[a]=spa[a]});a=document.getElementById("spa");spa.gevent.initModule("spa",a);spa.gevent.subscribe("spa","spa-identify",e);spa.gevent.subscribe("spa","spa-error",f);spa.gevent.subscribe("spa","message-marked",m);document.addEventListener("click",g,!1);spa.uriAnchor.setConfig(d);window.addEventListener("popstate",
h)}}}();spa.showdownext=function(){return{set:function(){showdown.extension("mathExt",function(){var a=[],b=/(?:<p>)?<img.*?src="(.+?)".*?alt="(.*?)"(.*?)\/?>(?:<\/p>)?/gi;return[{type:"lang",regex:/\\\[[^\(\~]([^]+?)\\\]/g,replace:function(b,d){a.push('<div class="mathjax">\\['+d+"\\]</div>");return"%PLACEHOLDER"+(a.length-1)+"%"}},{type:"output",filter:function(b){for(var c=0;c<a.length;++c)b=b.replace(new RegExp("<p>%PLACEHOLDER"+c+"% *</p>","gi"),a[c]);a=[];return b}},{type:"output",filter:function(a){return a.replace(new RegExp(b,
"gi"),function(a,b,c,m){return'<figure><img src="%1" alt="%2" title="%4"><figcaption>%3</figcaption></figure>'.replace("%1",b).replace("%2",c).replace("%3",c).replace("%4",c)})}}]})}}}();
spa.mathjax=function(){var a={mjRunning:!1,mjPending:!1,CreatePreview:function(){if(!a.mjPending){var b=document.getElementsByClassName("mathjax");a.mjRunning?(a.mjPending=!0,MathJax.Hub.Queue(["CreatePreview",a])):(a.mjRunning=!0,MathJax.Hub.Queue(["Typeset",MathJax.Hub,b],["PreviewDone",a]))}},PreviewDone:function(){a.mjRunning=a.mjPending=!1}};return{init:function(){a.callback=MathJax.Callback(["CreatePreview",a]);a.callback.autoReset=!0},update:function(){a.callback()}}}();
